<!DOCTYPE html>
 <html>
	<head>
		<title>
			UCLA Rocket Project Launcher
		</title>

	<script src="js/jquery-latest.js" type="text/javascript"></script>
    <link rel="stylesheet" href="styles/styles.css">

	</head>

	<body>

	<h1>Launch Control</h1>

	<p id="status">no status</p>
  <p id="op">no operation</p>
	<p id="time">no time</p>

  <br>

  <div>
    enter user: <input type="text" id="user">
  </div>
  <div>
    enter pass: <input type="password" id="pass">
  </div>

  <br>
  <br>
	<div>
		<button id="GEN_SAF" class="btn" type="button" onclick="func('GEN_SAF/open.php')">GEN_SAF</button>
		<button id="IGN_SAF" class="btn" type="button" onclick="func('IGN_SAF/open.php')">IGN_SAF</button>
		<button id="SV1"class="btn" type="button" onclick="func('SV1/open.php')">SV1</button>
		<button id="SV2" class="btn" type="button" onclick="func('SV2/open.php')">SV2</button>
		<button id="SV3" class="btn" type="button" onclick="func('SV3/open.php')">SV3</button>
		<button id="SV4" class="btn" type="button" onclick="func('SV4/open.php')">SV4</button>
		<button id="IGN" class="btn" type="button" onclick="func('IGN/open.php')">IGN</button>
	</div>

  <br>
  <br>
  <br>
  <br>
  <br>

	<div>
		<button id="CLOSE_GEN_SAF" class="btn" type="button" onclick="func('GEN_SAF/close.php')">CLOSE_GEN_SAF</button>
		<button id="CLOSE_IGN_SAF" class="btn" type="button" onclick="func('IGN_SAF/close.php')">CLOSE_IGN_SAF</button>
		<button id="CLOSE_SV1" class="btn" type="button" onclick="func('SV1/close.php')">CLOSE_SV1</button>
		<button id="CLOSE_SV2" class="btn" type="button" onclick="func('SV2/close.php')">CLOSE_SV2</button>
		<button id="CLOSE_SV3" class="btn" type="button" onclick="func('SV3/close.php')">CLOSE_SV3</button>
		<button id="CLOSE_SV4" class="btn" type="button" onclick="func('SV4/close.php')">CLOSE_SV4</button>
		<button id="CLOSE_IGN" class="btn" type="button" onclick="func('IGN/close.php')">CLOSE_IGN</button>
	</div>

	<script type="text/javascript">
	function func(str){
        var user = document.getElementById("user").value;
        var pass = document.getElementById("pass").value;
        console.log(user);
        console.log(pass);

        document.getElementById("user").value="";
        document.getElementById("pass").value="";

				$.ajax({
					url: str,
					type: 'POST',
					success: function(data, status){
						console.log(data);
            			document.getElementById("status").innerHTML = "status: "+JSON.parse(data)['status'];
            			document.getElementById("op").innerHTML = "operation: "+JSON.parse(data)['op'];

            			var d = new Date();
            			document.getElementById("time").innerHTML = "time: "+d;
					},
          			beforeSend: function(req){
            			req.setRequestHeader("Authorization", "Basic "+btoa(user+":"+pass));
          			},
          			error: function(status){
            			document.getElementById("status").innerHTML = "status: ERROR "+status;
            			console.log(status);
          			}
				});
	}
	</script>

	<script src="js/scripts.js" type="text/javascript"></script>

	</body>
</html>
