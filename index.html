<!DOCTYPE html>
 <html>
	<head>
		<title>
			UCLA Rocket Project Launcher
		</title>

	<script src="js/jquery-latest.js" type="text/javascript"></script>
    <link rel="stylesheet" href="styles/styles.css">

	</head>
	
	<body>

	<h1>Launch Control</h1>

	<p id="status">no status</p>
  <p id="op">no operation</p>
	<p id="time">no time</p>

  <br>
  
  <div>
    enter user: <input type="text" id="user">
  </div>
  <div>
    enter pass: <input type="text" id="pass">
  </div>

  <br>
  <br>
	<div>
		<button class="btn" type="button" onclick="func('IGN_GEN/open.php')">IGN_GEN</button>
		<button class="btn" type="button" onclick="func('IGN_SAF/open.php')">IGN_SAF</button>
		<button class="btn" type="button" onclick="func('SV1/open.php')">SV1</button>
		<button class="btn" type="button" onclick="func('SV2/open.php')">SV2</button>
		<button class="btn" type="button" onclick="func('SV3/open.php')">SV3</button>
		<button class="btn" type="button" onclick="func('IGN_MAIN/open.php')">IGN_MAIN</button>
		<button class="btn" type="button" onclick="func('IGN_SEC/open.php')">IGN_SEC</button>
	</div>

  <br>
  <br>
  <br>
  <br>
  <br>

	<div>
		<button class="btn" type="button" onclick="func('IGN_GEN/close.php')">CLOSE_IGN_GEN</button>
		<button class="btn" type="button" onclick="func('IGN_SAF/close.php')">CLOSE_IGN_SAF</button>
		<button class="btn" type="button" onclick="func('SV1/close.php')">CLOSE_SV1</button>
		<button class="btn" type="button" onclick="func('SV2/close.php')">CLOSE_SV2</button>
		<button class="btn" type="button" onclick="func('SV3/close.php')">CLOSE_SV3</button>
		<button class="btn" type="button" onclick="func('IGN_MAIN/close.php')">CLOSE_IGN_MAIN</button>
		<button class="btn" type="button" onclick="func('IGN_SEC/close.php')">CLOSE_IGN_SEC</button>
	</div>

	<script type="text/javascript">

			function func(str){
        var user = document.getElementById("user").value;
        var pass = document.getElementById("pass").value;
        console.log(user);
        console.log(pass);
        //document.getElementById("user").value="";
        //document.getElementById("pass").value="";
				$.ajax({
					url: str,
					type: 'POST',
					success: function(data, status){
						console.log(data);
            document.getElementById("status").innerHTML = "status: "+JSON.parse(data)['status'];
            document.getElementById("op").innerHTML = "operation: "+JSON.parse(data)['op'];
            
            var d = new Date();
            document.getElementById("time").innerHTML = "time: "+d;
					},
          beforeSend: function(req){
            req.setRequestHeader("Authorization", "Basic "+btoa(user+":"+pass));
          },
          error: function(status){
            document.getElementById("status").innerHTML = "status: ERROR "+status;
            console.log(status);
          }
				});
			}

	</script>

	</body>
</html>
